{"google":"","note":"Don't delete this file! It's used internally to help with page regeneration.","tagline":"Plateforme pour faire tourner les applications lourdes d'ewo","name":"Ewapps","body":"ewapps\r\n======\r\n\r\nversion : 0.0.5\r\n\r\nPlateforme pour faire tourner les applications lourdes d'ewo. Elle lance un daemon qui lui même va gérer les cibles de vie des autes applications (IA, gestion d'evenments aléatoires, ...)\r\n\r\nInstallation\r\n-----\r\n\r\n### Prérequis\r\n\r\nRécupèrer le code source via git\r\n```bash\r\n$ git clone \r\n```\r\nL'application utilise la lib [websocket++](https://github.com/zaphoyd/websocketpp) qui est définie entant que sous module, il faut donc exécuter la commande suivante :\r\n```bash\r\n$ git submodule init\r\n$ git submodule update\r\n```\r\nEnsuite, étant donné qu'ewapps est basé sur Qt4 il faut avoir les libs d'installée, à voir en fonction de l'OS.\r\nEnfin, il faut récupérer [segvcatch](http://code.google.com/p/segvcatch/), une lib qui permet la gestion des erreurs dans les plugins, à téléchartger [ici](http://code.google.com/p/segvcatch/downloads/detail?name=segvcatch-0.9.1.zip&can=2&q=)\r\n\r\n### Installation\r\n\r\n#### Websocket++\r\n\r\nVoir le guide de la lib [ici](https://github.com/zaphoyd/websocketpp/wiki/Build-Library) \r\n\r\n#### Segvcatch\r\n\r\nC'est du cmake, donc dans le dossier du makefile\r\n```bash\r\n$ cmake .\r\n$ make\r\n$ sudo make install\r\n``` \r\n\r\n#### Ewapps\r\n\r\nTrès simple aussi, il suffit de définir le type de build dans le fichier ewapp.pro (debug ou release dans la variable CONFIG) et après\r\n\r\n```bash\r\n$ qmake ewapp.pro\r\n$ make\r\n``` \r\n\r\nEt voila, y a plus qu'à\r\n\r\nUtilisation\r\n-----\r\n\r\n### Commandes\r\n\r\nIl n'y a que quatre options :\r\n- démarrer des applications (toutes si aucun argument)\r\n\r\n```bash\r\n$ ewapp start [appname1] [appname2] [...]\r\n```\r\n\r\n- arrêter des applications (toutes si aucun argument)\r\n\r\n```bash\r\n$ ewapp stop [appname1] [appname2] [...]\r\n```\r\n\r\n- redémarrer des applications (toutes si aucun argument)\r\n\r\n```bash \r\n$ ewapp restart [appname1] [appname2] [...]\r\n```\r\n\r\n- connaitre l'état d'applications (toutes si aucun argument)\r\n\r\n```bash \r\n$ ewapp state [appname1] [appname2] [...]\r\n```\r\n\r\n### Configuration\r\n\r\nLa configuration elle se fait via fichier INI. Ce fichier s'appel ewapp.ini et doit se trouver dans /etc/ ou usr/local/etc/ oudans la PATH du système, et peut se trouver dans un sous dossier ewapp (ou pas).\r\nSa structure est très simple\r\n```ini\r\n[General]\r\n; Fichier de lock\r\nlockFile=/var/lock/ewapp.lock\r\n; Nom à donner au daemon pour la communication interne\r\ndaemonName=ewapps\r\n\r\n[apps]\r\n; liste des applications à lancer\r\nlist=\t/usr/local/ewapp/admin.so,\r\n\tv3.so\r\n```\r\n\r\nCreation d'un plugin\r\n-----\r\n\r\nUn plugin se présente sous la forme d'une librairie partagée (.so sous unix). Je dois encore voir les mécanismes de Qt à ce niveau là, mais il devront surement dériver d'une certaine classe, ou au moins posséder certaines méthodes.\r\n\r\nUn plugin va pouvoir accéder à certains services fournis :\r\n* websocket : l'application aura le droit à un service websocket (un par appli pour éviter les collisons de nom, donc chaque appli fera sa popote interne pour différencier les fonctions). Un service de génération de tokken sera aussi fourni.\r\n* système de log\r\n* communication avec l'api ewo\r\n* communication interne avec d'autres applis\r\n* système d'envoie de mail\r\n* gestion de fichier de config\r\n* ...\r\n\r\nTout ceci sera explicité dans la doc plus tard\r\n"}